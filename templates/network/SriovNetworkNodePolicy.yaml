{{- if .Values.SriovNetworkNodePolicy.enable }}
{{- $initialContext := . }}
{{- $SriovNetworkNodePolicyContext := .Values.SriovNetworkNodePolicy.SriovNetworkNodePolicys }}
{{- range $SriovNetworkNodePolicyContext }}
apiVersion: sriovnetwork.openshift.io/v1
kind: SriovNetworkNodePolicy
metadata:
  name: {{ $initialContext.Release.Name }}-{{ .name }}-snnp
  namespace: {{ .namespace }} 
spec:
  resourceName: {{ .resourceName }} 
  nodeSelector:
    {{ .nodeSelector.key }}: {{ .nodeSelector.value | quote }}
  numVfs: {{ .numVfs }}
  {{- include "SriovNetworkNodePolicy.spec.nicSelector" . | indent 2}}
---
{{- end }}
{{- end }}